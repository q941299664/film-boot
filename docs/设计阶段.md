# 项目设计阶段文档

## 1. 引言

本文档旨在详细描述电影票务系统的设计阶段，包括数据库设计、系统目标、总体设计、逻辑结构设计等方面。

## 2. 数据库需求分析

根据业务需求，系统设计了以下数据库表：

1. 用户表（`sys_user_tb`）
2. 角色表（`sys_role_tb`）
3. 权限表（`sys_permission_tb`）
4. 用户_角色表（`sys_user_role_tb`）
5. 角色_权限表（`sys_role_permission_tb`）
6. 系统字典表（`sys_dict_tb`）
7. 系统字典数据表（`sys_dict_data_tb`）

每个表都有其特定的字段，用于存储相关信息。

## 3. 系统目标

本系统的设计主要实现以下目标：

### 3.1 人性化设计

- 前台：用户注册、用户登录、查询影片、影片打分、在线选座、在线订票、个人中心。
- 后台：管理员登录、后台用户管理、影片管理、场次管理、放映厅管理、评论管理、订单管理。

## 4. 系统概要设计

### 4.1 总体设计

#### 4.1.1 处理流程

#### 普通用户

1. 打开系统，进入系统前台首页界面，可以进行用户注册、用户登录、查询影片。
2. 用户登录后，可以进行影片打分、在线选座、在线订票、查看个人中心。
3. 用户可以随时退出系统。

#### 管理员

1. 打开系统，进入系统登录界面。
2. 通过验证后，进入系统管理主界面。
3. 管理员可以进行用户管理、影片管理、场次管理、放映厅管理、评论管理、订单管理。
4. 管理员可以随时退出系统。

### 4.2 逻辑结构设计

1. 放映厅实体和影院实体的关系是多对一。
2. 评论实体和用户实体的关系是多对一。
3. 评论实体和影片实体的关系是多对多。
4. 订单实体和用户实体的关系是多对一。
5. 订单实体和订单详情实体的关系是多对一。
6. 订单详情实体和放映厅实体的关系是多对一。
7. 订单详情实体和影片实体的关系是多对一。

## 5. 数据项和数据结构

根据表设计，定义以下数据项和数据结构：


### 用户表（`sys_user_tb`）

- `id`（用户ID）: 主键，自增长的唯一标识符。
- `username`（用户名）: 用户的登录名。
- `password`（密码）: 用户的登录密码。
- `salt`（盐）: 用于增强密码的安全性。
- `email`（电子邮箱）: 用户的电子邮箱地址。
- `deleted`（删除标志）: 逻辑删除标志，表示用户是否被删除。
- `update_id`（更新者ID）: 记录最后一次更新用户信息的管理员或用户的ID。
- `update_time`（更新时间）: 记录用户信息最后一次更新的时间。
- `create_id`（创建者ID）: 记录创建用户的管理员或用户的ID。
- `create_time`（创建时间）: 记录用户的创建时间。

### 角色表（`sys_role_tb`）

- `id`（角色ID）: 主键，自增长的唯一标识符。
- `parent_id`（上一级角色ID）: 表示角色的上一级角色，可以是其他角色的ID。
- `name`（角色名称）: 角色的名称，用于标识角色的唯一性。
- `deleted`（删除标志）: 逻辑删除标志，表示角色是否被删除。
- `update_id`（更新者ID）: 记录最后一次更新角色信息的管理员的ID。
- `update_time`（更新时间）: 记录角色信息最后一次更新的时间。
- `create_id`（创建者ID）: 记录创建角色的管理员的ID。
- `create_time`（创建时间）: 记录角色的创建时间。

### 权限表（`sys_permission_tb`）

- `id`（权限ID）: 主键，自增长的唯一标识符。
- `name`（权限名称）: 权限的名称，用于标识权限的唯一性。
- `parent_id`（上一级权限ID）: 表示权限的上一级权限，可以是其他权限的ID。
- `type`（权限类型）: 表示权限的类型，可能是菜单、按钮等。
- `uri`（权限字符串）: 表示权限的具体操作路径。
- `meta`（权限元数据）: 存储权限的元数据信息。
- `sort`（排序依据字段）: 用于排序权限的显示顺序。
- `deleted`（删除标志）: 逻辑删除标志，表示权限是否被删除。
- `update_id`（更新者ID）: 记录最后一次更新权限信息的管理员的ID。
- `update_time`（更新时间）: 记录权限信息最后一次更新的时间。
- `create_id`（创建者ID）: 记录创建权限的管理员的ID。
- `create_time`（创建时间）: 记录权限的创建时间。

### 用户_角色表（`sys_user_role_tb`）

- `id`（用户角色ID）: 主键，自增长的唯一标识符。
- `user_id`（用户ID）: 关联用户表的ID。
- `role_id`（角色ID）: 关联角色表的ID。
- `deleted`（删除标志）: 逻辑删除标志，表示用户角色关联是否被删除。
- `update_id`（更新者ID）: 记录最后一次更新用户角色关联的管理员的ID。
- `update_time`（更新时间）: 记录用户角色关联最后一次更新的时间。
- `create_id`（创建者ID）: 记录创建用户角色关联的管理员的ID。
- `create_time`（创建时间）: 记录用户角色关联的创建时间。

### 角色_权限表（`sys_role_permission_tb`）

- `id`（角色_权限ID）: 主键，自增长的唯一标识符。
- `role_id`（角色ID）: 关联角色表的ID。
- `permission_id`（权限ID）: 关联权限表的ID。
- `deleted`（删除标志）: 逻辑删除标志，表示角色权限关联是否被删除。

## 6. 系统详细设计与实现

### 6.1 前台系统设计实现

#### 6.1.1 首页界面实现

...（继续详细设计前台系统的各个模块）

### 6.2 后台系统设计实现

#### 6.2.1 管理员登录实现

...（继续详细设计后台系统的各个模块）

以上只是一个简单的示例，具体的设计阶段文档可能需要更详细的描述和图表。根据具体情况，你可以进一步扩展和修改。